<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>昌维的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="昌维写字的地方">
<meta property="og:type" content="website">
<meta property="og:title" content="昌维的博客">
<meta property="og:url" content="https://blog.changwei.me/index.html">
<meta property="og:site_name" content="昌维的博客">
<meta property="og:description" content="昌维写字的地方">
<meta property="og:locale">
<meta property="article:author" content="cw1997">
<meta property="article:tag" content="昌维,changwei,cw1997,changwei1006,博客,blog,技术博客,科技博客,计算机,计算机科学与技术,通信工程,电子工程,软件工程">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="昌维的博客" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">昌维的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Chang Wei&#39;s blog</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Suche"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.changwei.me"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-free5gc/Network-Functions-In-5G-Core-Network" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/free5gc/Network-Functions-In-5G-Core-Network/" class="article-date">
  <time class="dt-published" datetime="2021-10-11T19:07:49.000Z" itemprop="datePublished">2021-10-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/telecommunication-network/">telecommunication network</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/free5gc/Network-Functions-In-5G-Core-Network/">Network Functions in 5G Core Network</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="5G-核心網路中的網路元件"><a href="#5G-核心網路中的網路元件" class="headerlink" title="5G 核心網路中的網路元件"></a>5G 核心網路中的網路元件</h1><p>Network Function 即 網路元件，指的是 5G 核心網路中負責執行各種功能的軟體程式</p>
<p>這些程式將透過 SBI(Service-Based Interface) 接口進行通訊</p>
<h2 id="3GPP-Release-15"><a href="#3GPP-Release-15" class="headerlink" title="3GPP Release-15"></a>3GPP Release-15</h2><p>3GPP Release-15 的 Specification 文檔對應編號為 <code>3GPP TR 21.915 V15.0.0 (2019-09) </code>     </p>
<p>其全名為 <code>Release 15 Description;  Summary of Rel-15 Work Items  (Release 15)</code></p>
<p>在 3GPP Release-15 的 Specification 文檔中，<code>5.5.2 The 5G Core Network</code> 部分描述了 5G 核心網路中的各類 NF 對應的 specification 規格文檔，以及其主要功能</p>
<h2 id="Interface"><a href="#Interface" class="headerlink" title="Interface"></a>Interface</h2><p>在 5G 核心網路中，各類 NF 為應用程式軟體，而非傳統的硬體網路元件，因此這些應用程式軟體之間並沒有實際的物理接口進行互聯，而是透過網路的方式互相通訊</p>
<p>由於有可能存在一台物理伺服器上安裝多個 NF 並且運行，因此有可能多個 NF 共用同一張網路卡在同一個網段內進行通訊，因此稱 5G 核心網路的 NF 為總線型通訊，意味著多個 NF 的資料有可能在同一條網路線上進行傳輸</p>
<p>為了解釋方便起見，雖然 NF 都共用同一個網路線進行傳輸資料，但是我們仍然為 NF 之間定義一些邏輯接口 (logical interface) ，例如 </p>
<ul>
<li>Namf 為 AMF 這個 NF 對外的通訊接口</li>
<li>N1 為 AMF 這個 NF 和 UE 之間的通訊接口</li>
</ul>
<p>等等</p>
<h2 id="協定"><a href="#協定" class="headerlink" title="協定"></a>協定</h2><p>在  3GPP Release-15 中定義了其通訊協定為 HTTP2，並且 3GPP 使用 OpenAPI 3.0 對 NF 的標準 API 格式進行了定義，這些格式包括 DTO(Data Transport Object 數據傳輸對象)，以及 request / respone 應該具有的內容</p>
<p>其在 R15 原文中有如下定義</p>
<blockquote>
<p>The services provided by 5G NFs are designed as a set of APIs based on the following protocol stack:</p>
<p>-   the transport layer protocol is TCP as specified in IETF RFC 793;</p>
<p>-   transport layer security protection is supported with TLS;</p>
<p>-   the application layer protocol is HTTP/2 as specified in IETF RFC 7540;</p>
<p>-   the serialization protocol is JSON as specified in IETF RFC 8259;</p>
<p>-   the OpenAPI 3.0.0 is adopted as the Interface Definition Language.</p>
</blockquote>
<h2 id="網元與其協定"><a href="#網元與其協定" class="headerlink" title="網元與其協定"></a>網元與其協定</h2><h3 id="TS-24-501-Non-Access-Stratum-NAS-protocol-for-5G-System-5GS-Stage-3"><a href="#TS-24-501-Non-Access-Stratum-NAS-protocol-for-5G-System-5GS-Stage-3" class="headerlink" title="TS 24.501      Non-Access-Stratum (NAS) protocol for 5G System (5GS); Stage 3"></a>TS 24.501      Non-Access-Stratum (NAS) protocol for 5G System (5GS); Stage 3</h3><p>描述 NAS 協定</p>
<h3 id="TS-24-502-Access-to-the-5G-Core-Network-5GCN-via-non-3GPP-access-networks-Stage-3"><a href="#TS-24-502-Access-to-the-5G-Core-Network-5GCN-via-non-3GPP-access-networks-Stage-3" class="headerlink" title="TS 24.502      Access to the 5G Core Network (5GCN) via non-3GPP access networks; Stage 3"></a>TS 24.502      Access to the 5G Core Network (5GCN) via non-3GPP access networks; Stage 3</h3><p>描述非 3GPP 如何接入 5G 核心網路</p>
<h3 id="TS-24-526-5G-System-Phase-1-UE-policy-CT-WG1-Aspects"><a href="#TS-24-526-5G-System-Phase-1-UE-policy-CT-WG1-Aspects" class="headerlink" title="TS 24.526      5G System -Phase 1, UE policy; CT WG1 Aspects"></a>TS 24.526      5G System -Phase 1, UE policy; CT WG1 Aspects</h3><p>TODO，描述一些 UE 策略</p>
<h3 id="TS-23-527-5G-System-Restoration-Procedures-Stage-2"><a href="#TS-23-527-5G-System-Restoration-Procedures-Stage-2" class="headerlink" title="TS 23.527      5G System; Restoration Procedures; Stage 2"></a>TS 23.527      5G System; Restoration Procedures; Stage 2</h3><p>TODO</p>
<h3 id="TS-29-500-5G-System-Technical-Realization-of-Service-Based-Architecture-Stage-3"><a href="#TS-29-500-5G-System-Technical-Realization-of-Service-Based-Architecture-Stage-3" class="headerlink" title="TS 29.500      5G System; Technical Realization of Service Based Architecture; Stage 3"></a>TS 29.500      5G System; Technical Realization of Service Based Architecture; Stage 3</h3><p>TODO</p>
<h3 id="TS-29-501-5G-System-Principles-and-Guidelines-for-Services-Definition-Stage-3"><a href="#TS-29-501-5G-System-Principles-and-Guidelines-for-Services-Definition-Stage-3" class="headerlink" title="TS 29.501      5G System; Principles and Guidelines for Services Definition; Stage 3"></a>TS 29.501      5G System; Principles and Guidelines for Services Definition; Stage 3</h3><p>TODO</p>
<h3 id="TS-29-502-5G-System-Session-Management-Services-Stage-3"><a href="#TS-29-502-5G-System-Session-Management-Services-Stage-3" class="headerlink" title="TS 29.502      5G System; Session Management Services; Stage 3"></a>TS 29.502      5G System; Session Management Services; Stage 3</h3><p>描述 SMF 的規格</p>
<p>SMF 主要處理 UE 到 DN(Data Network) 的資料傳輸，以及為 UE 分配 IP 等操作</p>
<h3 id="TS-29-503-5G-System-Unified-Data-Management-Services-Stage-3"><a href="#TS-29-503-5G-System-Unified-Data-Management-Services-Stage-3" class="headerlink" title="TS 29.503      5G System; Unified Data Management Services; Stage 3"></a>TS 29.503      5G System; Unified Data Management Services; Stage 3</h3><p>描述 UDM 的規格</p>
<p>UDM 更適合作為無狀態的資料獲取服務，例如緩存</p>
<h3 id="TS-29-504-5G-System-Unified-Data-Repository-Services-Stage-3"><a href="#TS-29-504-5G-System-Unified-Data-Repository-Services-Stage-3" class="headerlink" title="TS 29.504      5G System; Unified Data Repository Services; Stage 3"></a>TS 29.504      5G System; Unified Data Repository Services; Stage 3</h3><p>描述 UDR 的規格</p>
<p>UDR 更適合做有狀態的資料獲取服務，例如用於持久化存儲資料的資料庫</p>
<h3 id="TS-29-505-5G-System-Usage-of-the-Unified-Data-Repository-services-for-Subscription-Data-Stage-3"><a href="#TS-29-505-5G-System-Usage-of-the-Unified-Data-Repository-services-for-Subscription-Data-Stage-3" class="headerlink" title="TS 29.505      5G System; Usage of the Unified Data Repository services for Subscription Data; Stage 3"></a>TS 29.505      5G System; Usage of the Unified Data Repository services for Subscription Data; Stage 3</h3><p>資料用量</p>
<h3 id="TS-29-507-5G-System-Access-and-Mobility-Policy-Control-Service-Stage-3"><a href="#TS-29-507-5G-System-Access-and-Mobility-Policy-Control-Service-Stage-3" class="headerlink" title="TS 29.507      5G System; Access and Mobility Policy Control Service; Stage 3"></a>TS 29.507      5G System; Access and Mobility Policy Control Service; Stage 3</h3><p>TODO</p>
<h3 id="TS-29-508-5G-System-Session-Management-Event-Exposure-Service-Stage-3"><a href="#TS-29-508-5G-System-Session-Management-Event-Exposure-Service-Stage-3" class="headerlink" title="TS 29.508      5G System; Session Management Event Exposure Service; Stage 3"></a>TS 29.508      5G System; Session Management Event Exposure Service; Stage 3</h3><p>做事件通知</p>
<h3 id="TS-29-509-5G-System-Authentication-Server-Services-Stage-3"><a href="#TS-29-509-5G-System-Authentication-Server-Services-Stage-3" class="headerlink" title="TS 29.509      5G System; Authentication Server Services; Stage 3"></a>TS 29.509      5G System; Authentication Server Services; Stage 3</h3><p>描述 AUSF 的規格</p>
<p>用於驗證 UE 是否被允許接入網路</p>
<h3 id="TS-29-510-5G-System-Network-Function-Repository-Services-Stage-3"><a href="#TS-29-510-5G-System-Network-Function-Repository-Services-Stage-3" class="headerlink" title="TS 29.510      5G System; Network Function Repository Services; Stage 3"></a>TS 29.510      5G System; Network Function Repository Services; Stage 3</h3><p>描述 NRF 的規格</p>
<p>NRF 主要維護當前正在運行的 NF，主要做服務發現功能</p>
<h3 id="TS-29-511-5G-System-Equipment-Identity-Register-Services-Stage-3"><a href="#TS-29-511-5G-System-Equipment-Identity-Register-Services-Stage-3" class="headerlink" title="TS 29.511      5G System; Equipment Identity Register Services; Stage 3"></a>TS 29.511      5G System; Equipment Identity Register Services; Stage 3</h3><p>UE 的標識註冊功能</p>
<h3 id="TS-29-512-5G-System-Session-Management-Policy-Control-Service-Stage-3"><a href="#TS-29-512-5G-System-Session-Management-Policy-Control-Service-Stage-3" class="headerlink" title="TS 29.512      5G System; Session Management Policy Control Service; Stage 3"></a>TS 29.512      5G System; Session Management Policy Control Service; Stage 3</h3><p>描述 PCF 的規格</p>
<h3 id="TS-29-513-5G-System-Policy-and-Charging-Control-signalling-flows-and-QoS-parameter-mapping-Stage-3"><a href="#TS-29-513-5G-System-Policy-and-Charging-Control-signalling-flows-and-QoS-parameter-mapping-Stage-3" class="headerlink" title="TS 29.513      5G System; Policy and Charging Control signalling flows and QoS parameter mapping; Stage 3"></a>TS 29.513      5G System; Policy and Charging Control signalling flows and QoS parameter mapping; Stage 3</h3><p>TODO</p>
<h3 id="TS-29-514-5G-System-Policy-Authorization-Service-Stage-3"><a href="#TS-29-514-5G-System-Policy-Authorization-Service-Stage-3" class="headerlink" title="TS 29.514      5G System; Policy Authorization Service; Stage 3"></a>TS 29.514      5G System; Policy Authorization Service; Stage 3</h3><p>TODO，驗證策略相關服務</p>
<h3 id="TS-29-518-5G-System-Access-and-Mobility-Management-Services-Stage-3"><a href="#TS-29-518-5G-System-Access-and-Mobility-Management-Services-Stage-3" class="headerlink" title="TS 29.518      5G System; Access and Mobility Management Services; Stage 3"></a>TS 29.518      5G System; Access and Mobility Management Services; Stage 3</h3><p>描述 AMF 的規格</p>
<p>AMF 主要負責將 UE 連接至 5G 核心網路，他將透過 N1 接口連接至基地台 gNB，再由 gNB 透過空口連接至 UE</p>
<h3 id="TS-29-519-5G-System-Usage-of-the-Unified-Data-Repository-Service-for-Policy-Data-Application-Data-and-Structured-Data-for-Exposure-Stage-3"><a href="#TS-29-519-5G-System-Usage-of-the-Unified-Data-Repository-Service-for-Policy-Data-Application-Data-and-Structured-Data-for-Exposure-Stage-3" class="headerlink" title="TS 29.519      5G System; Usage of the Unified Data Repository Service for Policy Data, Application Data and Structured Data for Exposure; Stage 3"></a>TS 29.519      5G System; Usage of the Unified Data Repository Service for Policy Data, Application Data and Structured Data for Exposure; Stage 3</h3><p>TODO</p>
<h3 id="TS-29-520-5G-System-Network-Data-Analytics-Services-Stage-3"><a href="#TS-29-520-5G-System-Network-Data-Analytics-Services-Stage-3" class="headerlink" title="TS 29.520      5G System; Network Data Analytics Services; Stage 3"></a>TS 29.520      5G System; Network Data Analytics Services; Stage 3</h3><p>TODO，網路資料分析服務</p>
<h3 id="TS-29-521-5G-System-Binding-Support-Management-Service-Stage-3"><a href="#TS-29-521-5G-System-Binding-Support-Management-Service-Stage-3" class="headerlink" title="TS 29.521      5G System; Binding Support Management Service; Stage 3"></a>TS 29.521      5G System; Binding Support Management Service; Stage 3</h3><p>TODO</p>
<h3 id="TS-29-522-5G-System-Network-Exposure-Function-Northbound-APIs-Stage-3"><a href="#TS-29-522-5G-System-Network-Exposure-Function-Northbound-APIs-Stage-3" class="headerlink" title="TS 29.522      5G System; Network Exposure Function Northbound APIs; Stage 3"></a>TS 29.522      5G System; Network Exposure Function Northbound APIs; Stage 3</h3><p>網路能力宣告，北向接口</p>
<h3 id="TS-29-531-5G-System-Network-Slice-Selection-Services-Stage-3"><a href="#TS-29-531-5G-System-Network-Slice-Selection-Services-Stage-3" class="headerlink" title="TS 29.531      5G System; Network Slice Selection Services; Stage 3"></a>TS 29.531      5G System; Network Slice Selection Services; Stage 3</h3><p>描述 NSSF 的規格</p>
<p>主要處理網路切片相關功能</p>
<h3 id="TS-29-540-5G-System-SMS-Services-Stage-3"><a href="#TS-29-540-5G-System-SMS-Services-Stage-3" class="headerlink" title="TS 29.540      5G System; SMS Services; Stage 3"></a>TS 29.540      5G System; SMS Services; Stage 3</h3><p>描述 SMSF 的規格</p>
<p>主要處理 “簡訊” 相關服務，“簡訊” 在中國大陸地區稱作 “短信”</p>
<h3 id="TS-29-551-5G-System-Packet-Flow-Description-Management-Service-Stage-3"><a href="#TS-29-551-5G-System-Packet-Flow-Description-Management-Service-Stage-3" class="headerlink" title="TS 29.551      5G System; Packet Flow Description Management Service; Stage 3"></a>TS 29.551      5G System; Packet Flow Description Management Service; Stage 3</h3><p>TODO</p>
<h3 id="TS-29-554-5G-System-Background-Data-Transfer-Policy-Control-Service-Stage-3"><a href="#TS-29-554-5G-System-Background-Data-Transfer-Policy-Control-Service-Stage-3" class="headerlink" title="TS 29.554      5G System; Background Data Transfer Policy Control Service; Stage 3"></a>TS 29.554      5G System; Background Data Transfer Policy Control Service; Stage 3</h3><p>TODO</p>
<h3 id="TS-29-561-5G-System-Interworking-between-5G-Network-and-external-Data-Networks-Stage-3"><a href="#TS-29-561-5G-System-Interworking-between-5G-Network-and-external-Data-Networks-Stage-3" class="headerlink" title="TS 29.561      5G System; Interworking between 5G Network and external Data Networks; Stage 3"></a>TS 29.561      5G System; Interworking between 5G Network and external Data Networks; Stage 3</h3><p>TODO</p>
<h3 id="TS-29-571-5G-System-Common-Data-Types-for-Service-Based-Interfaces-Stage-3"><a href="#TS-29-571-5G-System-Common-Data-Types-for-Service-Based-Interfaces-Stage-3" class="headerlink" title="TS 29.571      5G System; Common Data Types for Service Based Interfaces; Stage 3"></a>TS 29.571      5G System; Common Data Types for Service Based Interfaces; Stage 3</h3><p>TODO</p>
<h3 id="TS-29-572-5G-System-Location-Management-Services-Stage-3"><a href="#TS-29-572-5G-System-Location-Management-Services-Stage-3" class="headerlink" title="TS 29.572      5G System; Location Management Services; Stage 3"></a>TS 29.572      5G System; Location Management Services; Stage 3</h3><p>TODO</p>
<h3 id="TS-29-594-5G-System-Spending-Limit-Control-Service-Stage-3"><a href="#TS-29-594-5G-System-Spending-Limit-Control-Service-Stage-3" class="headerlink" title="TS 29.594      5G System; Spending Limit Control Service; Stage 3"></a>TS 29.594      5G System; Spending Limit Control Service; Stage 3</h3><p>TODO</p>
<p>The corresponding Security aspects of 5G System are defined by SA3 (UID: 750016). The work also serves as the basis for related charging and management, i.e., Data Charging in 5G System Architecture Phase 1 (UID: 780035), Service Based Interface for 5G Charging (UID: 780034), Management and orchestration of 5G networks and network slicing (UID: 760066).</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a target="_blank" rel="noopener" href="https://www.3gpp.org/release-15">https://www.3gpp.org/release-15</a></li>
<li><a target="_blank" rel="noopener" href="https://portal.3gpp.org/desktopmodules/Specifications/SpecificationDetails.aspx?specificationId=3389">https://portal.3gpp.org/desktopmodules/Specifications/SpecificationDetails.aspx?specificationId=3389</a></li>
<li><a target="_blank" rel="noopener" href="https://www.3gpp.org/ftp/Specs/archive/21_series/21.915">https://www.3gpp.org/ftp/Specs/archive/21_series/21.915</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.changwei.me/free5gc/Network-Functions-In-5G-Core-Network/" data-id="ckumwoumn000wd7nm6jv7229a" data-title="Network Functions in 5G Core Network" class="article-share-link">Teilen</a>
      
        <a href="https://blog.changwei.me/free5gc/Network-Functions-In-5G-Core-Network/#disqus_thread" class="article-comment-link">Kommentare</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/5G/" rel="tag">5G</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/5GC/" rel="tag">5GC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/5G%E6%A0%B8%E5%BF%83%E7%B6%B2/" rel="tag">5G核心網</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/5G%E6%A0%B8%E5%BF%83%E7%BD%91/" rel="tag">5G核心网</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Code-Tracing/" rel="tag">Code Tracing</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Core-Network/" rel="tag">Core Network</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Free5GC/" rel="tag">Free5GC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Network-Function/" rel="tag">Network Function</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%91%E6%A0%B8%E5%BF%83%E7%BD%91/" rel="tag">云核心网</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/hello-world/" class="article-date">
  <time class="dt-published" datetime="2021-10-11T17:05:04.842Z" itemprop="datePublished">2021-10-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.changwei.me/hello-world/" data-id="ckumwoum40001d7nm6ztr4vt2" data-title="Hello World" class="article-share-link">Teilen</a>
      
        <a href="https://blog.changwei.me/hello-world/#disqus_thread" class="article-comment-link">Kommentare</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-free5gc/3GPP-Release-15-note" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/free5gc/3GPP-Release-15-note/" class="article-date">
  <time class="dt-published" datetime="2021-09-21T05:02:14.000Z" itemprop="datePublished">2021-09-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/telecommunication-network/">telecommunication network</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/free5gc/3GPP-Release-15-note/">3GPP Release-15 閱讀筆記</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="簡介"><a href="#簡介" class="headerlink" title="簡介"></a>簡介</h1><p>3GPP Release-15 簡稱 3GPP R15 或者 R15</p>
<p>官方介紹： <a target="_blank" rel="noopener" href="https://www.3gpp.org/release-15">https://www.3gpp.org/release-15</a></p>
<p>規格詳情頁： <a target="_blank" rel="noopener" href="https://portal.3gpp.org/desktopmodules/Specifications/SpecificationDetails.aspx?specificationId=3389">https://portal.3gpp.org/desktopmodules/Specifications/SpecificationDetails.aspx?specificationId=3389</a></p>
<p>15.0.0 版本鏈接： <a target="_blank" rel="noopener" href="https://www.3gpp.org/ftp//Specs/archive/21_series/21.915/21915-f00.zip">https://www.3gpp.org/ftp//Specs/archive/21_series/21.915/21915-f00.zip</a> （發佈日期 2019-10-01）截至寫稿時（2021-09-21）該版本為 3GPP Release-15 最新版本</p>
<p>3GPP Release-15 為 5G 的第一個 3GPP 規格</p>
<p>R15 定義了 5G 系統的 Phase 1</p>
<p>R16 將定義 5G 系統的 Phase 2</p>
<h1 id="The-5GS-service-aspects（5G-服務場景）"><a href="#The-5GS-service-aspects（5G-服務場景）" class="headerlink" title="The 5GS service aspects（5G 服務場景）"></a>The 5GS service aspects（5G 服務場景）</h1><p>在 SMARTER 工作組下，SA1 定義了 5G 的需求和新服務</p>
<p>TS 22.261 描述了不同需求類型對應的 5G 使用場景</p>
<p>主要包括：</p>
<ul>
<li><strong>Enhanced Mobile Broadband (eMBB)</strong></li>
<li><strong>Critical Communications (CC) and Ultra Reliable and Low Latency Communications (URLLC)</strong></li>
<li><strong>Massive Internet of Things (mIoT)</strong></li>
<li><strong>Flexible network operations</strong></li>
</ul>
<p>一些 5G 能夠應用的垂直行業領域包括：</p>
<ul>
<li>Automotive and other transport (trains, maritime communications)</li>
<li>Transport, logistics, IoT</li>
<li>Discrete automation</li>
<li>Electricity distribution</li>
<li>Public Safety</li>
<li>Health and wellness</li>
<li>Smart cities</li>
<li>Media and entertainment</li>
</ul>
<p>其中還有一些垂直行業在 TS 22.261 中有提及</p>
<p>還有一些方面，例如 鐵路，eV2X 和相關聯的需求在 TS 22.186 中有提及</p>
<h1 id="5G-兼容性"><a href="#5G-兼容性" class="headerlink" title="5G 兼容性"></a>5G 兼容性</h1><p>5G 除了支持新的 5G 標準服務以外，還支持所有在</p>
<ul>
<li><p>TS 22.278</p>
</li>
<li><p>TSs 22.011</p>
</li>
<li><p>22.101</p>
</li>
<li><p>22.185</p>
</li>
<li><p>22.071</p>
</li>
<li><p>22.115</p>
</li>
<li><p>22.153</p>
</li>
<li><p>22.173</p>
</li>
</ul>
<p>中定義的 EPS(4G) 功能</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p>[1]             TS 22.261, “Service requirements for the 5G system”.</p>
<p>[2]             TS 22.278, “Service requirements for the Evolved Packet System (EPS)”.</p>
<p>[3]             TS 22.011, “Service accessibility”.</p>
<p>[4]             TS 22.101, “Service aspects; Service principles”.</p>
<p>[5]             TS 22.185, “Service requirements for V2X services”.</p>
<p>[6]             TS 22.071, “Location Services (LCS); Service description”.</p>
<p>[7]             TS 22.115, “Service aspects; Charging and billing”.</p>
<p>[8]             TS 22.153, “Multimedia priority service”.</p>
<p>[9]             TS 22.173, “IP Multimedia Core Network Subsystem (IMS) Multimedia Telephony Service and supplementary services”.</p>
<p>[10]            TS 22.186, “Service requirements for enhanced V2X scenarios”.</p>
<h1 id="NSA-非獨立組網架構-VS-SA-獨立組網架構"><a href="#NSA-非獨立組網架構-VS-SA-獨立組網架構" class="headerlink" title="NSA 非獨立組網架構 VS SA 獨立組網架構"></a>NSA 非獨立組網架構 VS SA 獨立組網架構</h1><h2 id="Non-Stand-Alone-NSA-非獨立組網架構"><a href="#Non-Stand-Alone-NSA-非獨立組網架構" class="headerlink" title="Non-Stand Alone(NSA) 非獨立組網架構"></a>Non-Stand Alone(NSA) 非獨立組網架構</h2><p>5G RAN 和 NRF 接口連接至 LTE 和 EPC 核心網（分別對應4G Radio 和 4G Core）</p>
<p>這樣可以充分利用 5G NR，但是又無需替換核心網</p>
<p>這種情況下只能使用 4G 服務，但是又可以享受到 NR 帶來的低延遲能力</p>
<p>The NSA is also known as “E-UTRA-NR Dual Connectivity (EN-DC)” or “Architecture Option 3”. See also the clause on EDCE5.</p>
<p>In EN-DC, the 4G’s eNB is the Master Node (MN) while the 5G’s en-gNB is the Secondary Node (SN).</p>
<p><img src="./NSA_Architecture.png" alt="NSA Architecture"></p>
<h2 id="Stand-Alone-SA-獨立組網架構"><a href="#Stand-Alone-SA-獨立組網架構" class="headerlink" title="Stand Alone(SA) 獨立組網架構"></a>Stand Alone(SA) 獨立組網架構</h2><p>5G NR(New Radio) 連接至 5G CN(Core Network)</p>
<p>這種配置下，全部的 5G Phase 1 都將被支持</p>
<p>NRF 基站（邏輯節點gNB）之間使用 Xn 接口互聯</p>
<p>並且 AN(Access Network (called the “NG-RAN for SA architecture”)) 使用 NG 接口連接至 5GC</p>
<p><img src="./SA_Architecture.png" alt="SA Architecture"></p>
<h1 id="Core-Network-核心網概述"><a href="#Core-Network-核心網概述" class="headerlink" title="Core Network 核心網概述"></a>Core Network 核心網概述</h1><p>5G 獨立組網系統中，5G System（5GS）由</p>
<ul>
<li>User Equipment</li>
<li>Access Network（New Radio，NRF）</li>
<li>Core Network</li>
</ul>
<p>組成</p>
<p>之前提到的服務需求將作為架構定義的基礎</p>
<p>TR 23.799 開始定義了架構規格（stage 2），也稱為 NextGen TR</p>
<p>之後在</p>
<ul>
<li>TS 23.501</li>
<li>TS 23.502</li>
<li>TS 23.503</li>
</ul>
<p>中完全定義</p>
<h2 id="Service-Based-Architecture-SBA"><a href="#Service-Based-Architecture-SBA" class="headerlink" title="Service-Based Architecture (SBA)"></a>Service-Based Architecture (SBA)</h2><p>5G 架構依賴於 SBA 框架</p>
<p>一系列的 Network Function 替代了 傳統 Network Entities 組成架構內的元素</p>
<p>通過公共框架的一些接口，任何給定的 NF （服務提供者）都可以提供服務給被授權的其他 NFs 或者服務消費者。</p>
<p><img src="./5G_System_architecture.png" alt="5G_System_architecture"></p>
<p>在當前 stage，只有如下的 NF（Network Function）和元素將被重點提到</p>
<ul>
<li>The User Equipment (UE);</li>
<li>The (Radio) Access Network [(R)AN];</li>
<li>The User Plane Function (UPF), handling the user data;</li>
<li>The (external) Data Network (DN);</li>
<li>Some remarkable Network Functions (NFs): <ul>
<li>The Application Function (AF), handling the application(s);</li>
<li>The Access and Mobility management Function (AMF), that accesses the UE and the (R)AN;</li>
<li>The Session Management Function (SMF), that accesses the UPF.</li>
</ul>
</li>
</ul>
<p>其他 NF 之後會提到</p>
<h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h3><p>SBA 服務允許虛擬化部署</p>
<p>服務可以分佈式部署，做冗餘或者彈性伸縮</p>
<p>同一功能可以由多個 NF 同時提供（冗餘）並且部署在多個位置</p>
<p>UE 的消息將被路由至任何一個具有處理能力的 NF</p>
<p>因此 NF 必須盡可能保持無狀態特性，這樣才能過很方便地水平擴展或者允許請求消息被任意路由至不同的 NF</p>
<p>由於 NF 提供了冗餘能力，因此任何指定的 NF 都可以有計劃性的進行停機維護，當維護完畢後他們也可以自動恢復</p>
<h1 id="Access-Network-接入網概述"><a href="#Access-Network-接入網概述" class="headerlink" title="Access Network 接入網概述"></a>Access Network 接入網概述</h1><p>5G AN 架構非常簡單，因為它只包含一個實體，也就是 gNB，具體可以參考 TS 38.401</p>
<ul>
<li>gNB 通過 NG Interface 連接至 5G CN</li>
<li>gNB 通過 Xn Interface 連接至 5G’s gNB</li>
<li>gNB 通過 X2 Interface 連接至 4G’s eNB</li>
<li>gNB 通過 NR interface 連接至 UE</li>
</ul>
<p><img src="./AN_interfaces.png" alt="AN_interfaces"></p>
<p>AN 架構在原理上和 4G  LTE 和 eNB 組網的方式相近，可以參考 TS 36.401 和 TS 38.420</p>
<h2 id="References-for-5GS-Stage-2"><a href="#References-for-5GS-Stage-2" class="headerlink" title="References for 5GS Stage 2"></a>References for 5GS Stage 2</h2><p>The main Stage 2 specifications for the 5G System are:</p>
<p>[1]             TS 23.501, “System Architecture for the 5G System”, Stage 2. It specifies the overall 5GS Stage 2: the architecture reference model, including the network functions and the description of high level functions.</p>
<p>[2]             TS 23.502, “Procedures for the 5G System”, Stage 2. It specifies the 5GS Stage 2 for roaming and non-roaming scenarios, for the policy and charging related control framework.</p>
<p>[3]             TS 23.503, “Policy and Charging Control Framework for the 5G System”, Stage 2. It is the companion specification to TS 23.501 and TS 23.503, and specifies the Stage 2 procedures and Network Function Services.</p>
<p>[4]             TR 23.799 “Study on Architecture for Next Generation System”, Stage 2</p>
<p>[5]             TS 38.401 “ NG-RAN; Architecture description”</p>
<p>[6]             TS 38.420 “ NG-RAN; Xn general aspects and principles”</p>
<p>[7]             TS 36.401 “Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Architecture description”</p>
<h2 id="Abbreviation-applicable-to-this-section"><a href="#Abbreviation-applicable-to-this-section" class="headerlink" title="Abbreviation applicable to this section:"></a>Abbreviation applicable to this section:</h2><p>NR             New Radio (5G Radio)</p>
<p>NSA            Non Stand-Alone</p>
<p>PBCH          Physical Broadcast Channel</p>
<p>PDCCH         Physical Downlink Control Channel</p>
<p>PDSCH         Physical Downlink Shared Channel</p>
<p>PRACH         Physical Random Access Channel</p>
<p>PSS            Primary Synchronisation Signal</p>
<p>PUCCH         Physical Uplink Control Channel</p>
<p>PUSCH         Physical Uplink Shared Channel</p>
<p>SA             Stand-Alone</p>
<p>SSS            Secondary Synchronisation Signal</p>
<h1 id="Radio-和-Core-之間的功能劃分"><a href="#Radio-和-Core-之間的功能劃分" class="headerlink" title="Radio 和 Core 之間的功能劃分"></a>Radio 和 Core 之間的功能劃分</h1><p>進一步了解 AN 和 CN 提供的功能</p>
<p><img src="./The_5G_System_architecture.svg" alt="The_5G_System_architecture"></p>
<p>AN 和 CN 之間交換數據是通過 CN 側的 AMF，UPF 和 SMF，而 AN 側則是 gNB</p>
<p><img src="./Functional_Split_between_NG-RAN_and_5GC.svg" alt="Functional_Split_between_NG-RAN_and_5GC"></p>
<p>黃色方框為 NF，白色方框為其所負責的任務</p>
<h2 id="CN-側"><a href="#CN-側" class="headerlink" title="CN 側"></a>CN 側</h2><p>所有和用戶數據無關的信令都將經過 AMF (“Access and Mobility management Function”) ，例如可移動性或者安全性</p>
<p>SMF (“Session Management Function”) 負責與用戶數據有關的信令，例如會話的建立</p>
<p>UPF 負責處理用戶數據</p>
<h2 id="AN-側"><a href="#AN-側" class="headerlink" title="AN 側"></a>AN 側</h2><p>gNB (5G Node B) 執行所有 AN 相關的主要任務，包括</p>
<ul>
<li>無線電資源管理</li>
<li>無線電承載控制</li>
<li>無線電權限控制</li>
<li>移動連接控制</li>
<li>為 UE 動態分配資源</li>
</ul>
<h1 id="5G-核心網"><a href="#5G-核心網" class="headerlink" title="5G 核心網"></a>5G 核心網</h1><h2 id="NF-Network-Function"><a href="#NF-Network-Function" class="headerlink" title="NF (Network Function)"></a>NF (Network Function)</h2><h3 id="AMF-Access-and-Mobility-management-Function"><a href="#AMF-Access-and-Mobility-management-Function" class="headerlink" title="AMF (Access and Mobility management Function)"></a>AMF (Access and Mobility management Function)</h3><p>支援不同移動性管理需求的 UE</p>
<p>它主要處理如下工作</p>
<ul>
<li>Non-Access Stratum (NAS) 信令處理</li>
<li>NASA 信令安全</li>
<li>Access Stratum (AS) 安全控制</li>
<li>CN 節點之間處理 3GPP AN 的信令</li>
<li>空閒模式下 UE 設備的可達性，包括控制和控制重傳</li>
<li>區域管理註冊</li>
<li>支援系統內外的可移動性</li>
<li>訪問認證</li>
<li>檢測漫遊權限</li>
<li>支援網路切片</li>
<li>SMF 選擇</li>
</ul>
<h3 id="SMF-Session-Management-Function"><a href="#SMF-Session-Management-Function" class="headerlink" title="SMF (Session Management Function)"></a>SMF (Session Management Function)</h3><p>和 AMF 共同配合，客製化移動管理模式，例如 “Mobile Initiated Connection Only” (MICO) 僅允許移動連接初始化或者 RAN enhancements RAN 增強，類似於 RRC Inactive 狀態</p>
<p>它主要處理如下任務</p>
<ul>
<li>會話管理</li>
<li>UE IP 地址分配和管理</li>
<li>UPF 的選擇與控制</li>
<li>為 UPF 設定流量轉發策略，將數據包路由到正確位置</li>
<li>策略，QoS</li>
<li>下行數據通知</li>
</ul>
<h3 id="UPF-User-Plane-Function"><a href="#UPF-User-Plane-Function" class="headerlink" title="UPF (User Plane Function)"></a>UPF (User Plane Function)</h3><p>主要負責的處理任務</p>
<ul>
<li><p>RAT 內外的可移動性的錨點</p>
</li>
<li><p>外部 PDU 會話與 Data Network 互聯</p>
</li>
<li><p>封包路由和轉發</p>
</li>
<li><p>封包偵測與用戶面的部分策略規則</p>
</li>
<li><p>流量報告</p>
</li>
<li><p>上行流量分類，將流量路由到數據網路</p>
</li>
<li><p>支援多宿主的 PDU 會話分支點</p>
</li>
<li><p>用戶面的 QoS 處理，包括封包過濾，門控，上下行速率控制</p>
</li>
<li><p>上行封包校驗（SDF 到 QoS flow 的映射）</p>
</li>
<li><p>下行封包緩衝和下行數據通知觸發</p>
</li>
</ul>
<h3 id="Network-Repository-Function-NRF"><a href="#Network-Repository-Function-NRF" class="headerlink" title="Network Repository Function (NRF)"></a>Network Repository Function (NRF)</h3><p>提供 NF 服務管理，包括</p>
<ul>
<li>服務註冊</li>
<li>服務註銷</li>
<li>服務驗證</li>
<li>服務發現</li>
</ul>
<h3 id="Network-Exposure-Function-NEF"><a href="#Network-Exposure-Function-NEF" class="headerlink" title="Network Exposure Function (NEF)"></a>Network Exposure Function (NEF)</h3><p>對外輸出 NF 的處理能力數據</p>
<p>這些“能力”包括</p>
<ul>
<li>監控能力</li>
<li>供應能力</li>
<li>路由流量的應用影響能力</li>
<li>策略與計費能力</li>
</ul>
<h3 id="Unified-Data-Management-UDM"><a href="#Unified-Data-Management-UDM" class="headerlink" title="Unified Data Management (UDM)"></a>Unified Data Management (UDM)</h3><p>5GC 資源的數據存儲架構為“計算和存儲分離”</p>
<p>Unified Data Repository (UDR) 是主要數據庫</p>
<p>Unstructured Data Storage Function (UDSF) 存儲非結構化的動態數據</p>
<h2 id="5G-核心網路標準與相關的-Network-Functions"><a href="#5G-核心網路標準與相關的-Network-Functions" class="headerlink" title="5G 核心網路標準與相關的 Network Functions"></a>5G 核心網路標準與相關的 Network Functions</h2><h3 id="託管服務與邊緣計算-Local-hosting-of-services-and-Edge-Computing"><a href="#託管服務與邊緣計算-Local-hosting-of-services-and-Edge-Computing" class="headerlink" title="託管服務與邊緣計算 Local hosting of services and Edge Computing"></a>託管服務與邊緣計算 Local hosting of services and Edge Computing</h3><p>“Service Hosting Environment”，中文譯名“服務託管環境”，是位於運營商內部的網路，5G 使用該網路支援多種類型的服務</p>
<p>為了滿足</p>
<ul>
<li>降低延遲</li>
<li>降低帶寬壓力</li>
</ul>
<p>等目標，這些 Hosted Services（託管服務） 將建置在靠近用戶端的位置</p>
<p>Hosted Services（託管服務） 包含運營商，以及可信任的第三方服務</p>
<p>Hosted Services（託管服務） 支援靈活的用戶面路由策略，當用戶在通訊會話中移動位置時，其允許為了提升用戶體驗和網路負載均衡的情況下改變路由路徑</p>
<p>為了利用邊緣計算節點中的託管服務降低延遲，5G 核心網路將會選擇靠近 UE 的 UPF ，並且通過 N6 Interface 自行 UPF 到本地網路的路由策略</p>
<p>一部分邊緣計算節點將具有如下特性：</p>
<ul>
<li>本地與遠端服務可以同時訪問數據網路，這是構成低延遲網路的方案</li>
<li>應用可以主動影響路由策略</li>
<li>支援 URLLC (Ultra Reliable Low-Latency) 超低延遲服務</li>
<li>支援本地區域數據網路</li>
</ul>
<h3 id="網路切片-Network-slicing"><a href="#網路切片-Network-slicing" class="headerlink" title="網路切片 Network slicing"></a>網路切片 Network slicing</h3><p>網路切片是為提供某種特定類型服務的網路而命名的一種元素</p>
<p>例如，可以分別為 IoT 設備，經典 UE 手機設備，V2X 等設備分別提供網路切片</p>
<p>通常情況下，不同的服務功能具有不同的網路要求</p>
<p>包括優先級要求和策略控制要求</p>
<p>網路能效要求，包括延遲，移動性，傳輸速率</p>
<p>或者這些服務僅僅針對特定的用戶類型，例如 MPS 用戶群，公共安全用戶，企業客戶，漫遊客戶，託管的 MVNO</p>
<p>不同的網路切片可以同時使用</p>
<p>端到端的網絡切片是 5G 系統的一大特點。在與其他 PLMN 互操作所需的範圍內，每個已經部署的 PLMN 都支持它</p>
<p>例如運營商 A 的物聯網切片可以直接與運營商 B 的物聯網切片互聯，運營商可以根據業務場景決定部署多少個網絡切片以及跨多個切片共享哪些功能/特性</p>
<p>每個切片的特性根據 QoS、比特率、延遲等進行定義</p>
<p>對於給定的切片，這些特性要么在 3GPP 標準中預先定義，要么由運營商定義</p>
<p>預定義切片分為三種類型：</p>
<ul>
<li>類型 1 專用於支援 eMBB</li>
<li>類型 2 用於 URLLC</li>
<li>類型 3 用於 MIoT 支持</li>
</ul>
<p>這些預定義的網路切片允許在 PLMN 間互相操作，同時減少運營商之間的協調工作</p>
<p>對於運營商定義的切片，它們可以在網絡切片之間實現更多差異化</p>
<p>為切片處理引入了專用 NF：“網絡切片選擇功能”（”Network Slice Selection Function” (NSSF)），它可以選擇適當的切片</p>
<p>UE 可以同時使用多個網絡切片。</p>
<p>UE 中的網絡切片選擇策略將應用程序鏈接到網絡切片</p>
<p>網絡切片還支持漫遊場景</p>
<p>最後，網絡切片可以與 EPS 互通，無論器是否支援 4G’s Dedicated Core Networks Selection Mechanism (e)DECOR</p>
<h3 id="統一接入控制-Unified-access-control"><a href="#統一接入控制-Unified-access-control" class="headerlink" title="統一接入控制 Unified access control"></a>統一接入控制 Unified access control</h3><p>當在 5G 系統中發生網路擁塞，會使用不同的標準決定是否應該阻止或允許訪問</p>
<p>標準取決於運營商策略，部署方案，訂閱客戶資料以及可用服務</p>
<p>5G 系統提供單一的統一訪問控制，運營商根據這些與所謂的“訪問身份和訪問類別”相關聯的標準來控制接入與否</p>
<p>5G 系統也提供</p>
<ul>
<li>基於移動性管理擁塞控制</li>
<li>基於 DNN 的擁塞控制</li>
<li>基於切片的擁塞控制</li>
</ul>
<h3 id="支援-3GPP-與-非-3GPP-的接入"><a href="#支援-3GPP-與-非-3GPP-的接入" class="headerlink" title="支援 3GPP 與 非 3GPP 的接入"></a>支援 3GPP 與 非 3GPP 的接入</h3><p>5G 系統支援 3GPP 技術雞兒，包括一種或多種 5G NR 以及 4G’s E-UTRA</p>
<p>他也支援非 3GPP 技術接入，甚至包括不可信設備</p>
<p>為了優化和資源效率，5G 系統能夠為一個服務選擇最適當的 3GPP 或者 non-3GPP 技術進行接入</p>
<p>潛在地允許多種接入技術同時用於 UE 上活動的一項或多項服務</p>
<p>還支援不同接入之間的無縫移動</p>
<p>名為 “Authentication Server Function “(AUSF) 的 NF 允許一個統一框架支援 3GPP 和 non-3GPP 接入</p>
<p>當同時透過 3GPP 和non-3GPP 接入時，5G Globally Unique Temporary Identifier (5G-GUTI) 將唯一標識一個 UE</p>
<h3 id="策略框架與-QoS-支援"><a href="#策略框架與-QoS-支援" class="headerlink" title="策略框架與 QoS 支援"></a>策略框架與 QoS 支援</h3><p>策略框架用於支援</p>
<ul>
<li>會話</li>
<li>接入</li>
<li>移動性控制</li>
<li>QoS</li>
<li>計費</li>
</ul>
<p>和 UE 中分發的策略類似</p>
<p>UE 使用兩種機制連接到 QoS 和策略</p>
<ul>
<li>UE 路由選擇策略，政策一個應用是否可以被關聯到已經存在的 PDU 會話，能夠卸載到 PDU 會話外部的 non-3GPP 訪問，能夠觸發簡歷一個新的 PDU 會話</li>
<li>接入網路發現與策略選擇，用於選擇非 3GPP 訪問</li>
</ul>
<p>在網絡中，使用名為“網絡數據分析功能”（NWDAF）的 NF 來提供數據分析支持，即提供每個網絡切片的負載</p>
<p>對於QoS，系統定義了一個基於流的QoS框架，有兩種基本模式：有或沒有QoS專用信令</p>
<p>對於沒有任何特定 QoS 信令流的選項將會應用標準化的數據包標記，用於通知應該提供何種 QoS </p>
<p>帶有 QoS 專用協商的選項提供了更大的靈活性和更細粒度的 QoS 支持。</p>
<p>此外，還引入了一種新的 QoS 類型：“反射 QoS”，其中 UE 請求上行鏈路流量與其接收的下行鏈路流量相同的 QoS 規則。 在這種模式下，通過最少的控制平面信令支援下行鏈路和上行鏈路上的對稱 QoS 差異</p>
<h3 id="網路容量公開"><a href="#網路容量公開" class="headerlink" title="網路容量公開"></a>網路容量公開</h3><p>運營商公開網路容量（例如 QoS 策略）給第三方 ISP ICP 的機制包括</p>
<ul>
<li>Service Exposure and Enablement Support (SEES)</li>
<li>(enhanced) Flexible Mobile Service Steering ((e)FMSS)</li>
</ul>
<p>在 5G 網路中，新的網路容量將被公開給第三方，例如允許第三方針對不同使用案例客製化一個特定的網路切片</p>
<p>為提升用戶體驗，允許第三方在可行的託管服務環境中管理第三方應用，有效利用回源流程和用戶資源</p>
<p>關於網路容量公開的更多部分，請參考 Northbound APIs</p>
<h3 id="其他特殊服務"><a href="#其他特殊服務" class="headerlink" title="其他特殊服務"></a>其他特殊服務</h3><p>5GS 中還支援其他一些特殊服務，包括</p>
<h4 id="Short-Message-Service-SMS"><a href="#Short-Message-Service-SMS" class="headerlink" title="Short Message Service (SMS)"></a>Short Message Service (SMS)</h4><p>支援 SMS over NAS，包括 SMS over non-3GPP 接入</p>
<h4 id="IP-Multimedia-Subsystem-IMS"><a href="#IP-Multimedia-Subsystem-IMS" class="headerlink" title="IP-Multimedia Subsystem (IMS)"></a>IP-Multimedia Subsystem (IMS)</h4><p>大部分 5G 部署初級階段並不可用，如果連接在沒有 IMS 的 5GS 的 UE 設備執行了 IMS 業務，將會觸發網路切換到關聯的 EPS 或者適當的 RAT</p>
<p>這也適用於 IMS 緊急服務</p>
<h4 id="Multi-Operator-Core-Network-MOCN"><a href="#Multi-Operator-Core-Network-MOCN" class="headerlink" title="Multi-Operator Core Network (MOCN)"></a>Multi-Operator Core Network (MOCN)</h4><p>一個 RAN 被多個 Core Network 共享使用</p>
<h4 id="Public-Warning-System-PWS"><a href="#Public-Warning-System-PWS" class="headerlink" title="Public Warning System (PWS)"></a>Public Warning System (PWS)</h4><p>在 Cell Broadcast Centre (CBC) Function (CBCF) 和 AMF 之間透過服務化接口互聯進行支援</p>
<h4 id="Multimedia-Priority-Services-MPS"><a href="#Multimedia-Priority-Services-MPS" class="headerlink" title="Multimedia Priority Services (MPS)"></a>Multimedia Priority Services (MPS)</h4><p>透過 MPS-specific exemptions 支援 5GS 移動性管理與會話管理</p>
<h4 id="Mission-Critical-Services-MCS"><a href="#Mission-Critical-Services-MCS" class="headerlink" title="Mission Critical Services (MCS)"></a>Mission Critical Services (MCS)</h4><p>透過訂閱 5G QoS 配置和必要的策略進行支援</p>
<p>一些標準的 QoS 指標在未來將為 MCS 定義</p>
<h4 id="PS-Data-Off"><a href="#PS-Data-Off" class="headerlink" title="PS Data Off"></a>PS Data Off</h4><p>向後兼容</p>
<p>提供：</p>
<ul>
<li><p>Control Plane Load Control</p>
</li>
<li><p>Congestion and Overload control‘’</p>
</li>
</ul>
<p>包括</p>
<ul>
<li>AMF Load-rebalancing</li>
<li>TNL (Transport Network Layer between 5GC and 5G-AN) Load (re-)balancing</li>
</ul>
<p>和</p>
<ul>
<li><p>AMF Overload Control</p>
</li>
<li><p>SMF Overload Control</p>
</li>
</ul>
<p>類似</p>
<h3 id="其他-5G-規格"><a href="#其他-5G-規格" class="headerlink" title="其他 5G 規格"></a>其他 5G 規格</h3><p>當漫遊在 VPLMN 中，UE 在 VPLMN 中的漫遊策略允許 HPLMN 為 UE 提供和更新一個首選 PLMN 或者接入技術的組合。這些行為配置透過預先在 USIM 卡中寫入或者透過 NAS 信令的方式提供</p>
<h2 id="核心網路協定"><a href="#核心網路協定" class="headerlink" title="核心網路協定"></a>核心網路協定</h2><p>摘要基於中國移動、諾基亞、愛立信、華為在 SP-180595 中提供的內容</p>
<p>5G NF 提供的服務被設計為一組基於以下協議棧的 API：</p>
<ul>
<li>傳輸層協議是 IETF RFC 793 中規定的 TCP</li>
<li>使用 TLS 支持傳輸層安全保護</li>
<li>應用層協議是 IETF RFC 7540 中規定的 HTTP/2</li>
<li>序列化協議是 IETF RFC 8259 中指定的 JSON</li>
<li>採用 OpenAPI 3.0.0 作為接口定義語言</li>
</ul>
<h3 id="協議棧"><a href="#協議棧" class="headerlink" title="協議棧"></a>協議棧</h3><ul>
<li>Application</li>
<li>HTTP/2</li>
<li>TLS</li>
<li>TCP</li>
<li>IP</li>
<li>L2</li>
</ul>
<p>為了減少客戶端和服務器之間的耦合，API設計採用RESTful框架如下：</p>
<ul>
<li>the REST-style service operations implement the Level 2 of the Richardson maturity model</li>
<li>Level 3 (HATEOAS) of the Richardson maturity model is optional</li>
</ul>
<p>OAuth2（在 IETF RFC 6749 中指定）用於授權 NF 訪問其他服務，NRF 充當授權服務器</p>
<p>基於服務的接口還支援過載控制和優先級消息</p>
<p>在 N4 Interface 上使用 PFCP（Packet Forwarding Control Protocol），用於在 5GC 中分離 Control Plane 和 User Plane。這與 EPC 中 CUPS 支持的協議相同，但有一些擴展以支持所有 5GC 要求（例如以太網流量、QoS 流）</p>
<p>GTPv2 通過 N26 Interface 用於 EPC 和 5GC 之間的移動性。這與 EPC 中通過 S10 支持的協議相同，只需進行最少的擴展即可支持 5GS 要求（例如 5GS TAI、gNB ID）</p>
<p>對於與外部 DN（即 N6 Interface）的 5G 網絡互通，TS 29.061 中規定的那些協議（IP、non-IP、DHCP、RADIUS 和 Diameter 協議）仍然適用於 SMF/UPF 和外部 DN 之間的資料傳輸，並盡可能適配他們。此外，SMF/UPF 還支持以太網流量與外部 DN 互通。</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><strong>References</strong></p>
<p>The main protocols of the 5G Core Network are specified in:</p>
<p>TS 24.501      Non-Access-Stratum (NAS) protocol for 5G System (5GS); Stage 3</p>
<p>TS 24.502      Access to the 5G Core Network (5GCN) via non-3GPP access networks; Stage 3</p>
<p>TS 24.526      5G System -Phase 1, UE policy; CT WG1 Aspects</p>
<p>TS 23.527      5G System; Restoration Procedures; Stage 2</p>
<p>TS 29.500      5G System; Technical Realization of Service Based Architecture; Stage 3</p>
<p>TS 29.501      5G System; Principles and Guidelines for Services Definition; Stage 3</p>
<p>TS 29.502      5G System; Session Management Services; Stage 3</p>
<p>TS 29.503      5G System; Unified Data Management Services; Stage 3</p>
<p>TS 29.504      5G System; Unified Data Repository Services; Stage 3</p>
<p>TS 29.505      5G System; Usage of the Unified Data Repository services for Subscription Data; Stage 3</p>
<p>TS 29.507      5G System; Access and Mobility Policy Control Service; Stage 3</p>
<p>TS 29.508      5G System; Session Management Event Exposure Service; Stage 3</p>
<p>TS 29.509      5G System; Authentication Server Services; Stage 3</p>
<p>TS 29.510      5G System; Network Function Repository Services; Stage 3</p>
<p>TS 29.511      5G System; Equipment Identity Register Services; Stage 3</p>
<p>TS 29.512      5G System; Session Management Policy Control Service; Stage 3</p>
<p>TS 29.513      5G System; Policy and Charging Control signalling flows and QoS parameter mapping; Stage 3</p>
<p>TS 29.514      5G System; Policy Authorization Service; Stage 3</p>
<p>TS 29.518      5G System; Access and Mobility Management Services; Stage 3</p>
<p>TS 29.519      5G System; Usage of the Unified Data Repository Service for Policy Data, Application Data and Structured Data for Exposure; Stage 3</p>
<p>TS 29.520      5G System; Network Data Analytics Services; Stage 3</p>
<p>TS 29.521      5G System; Binding Support Management Service; Stage 3</p>
<p>TS 29.522      5G System; Network Exposure Function Northbound APIs; Stage 3</p>
<p>TS 29.531      5G System; Network Slice Selection Services; Stage 3</p>
<p>TS 29.540      5G System; SMS Services; Stage 3</p>
<p>TS 29.551      5G System; Packet Flow Description Management Service; Stage 3</p>
<p>TS 29.554      5G System; Background Data Transfer Policy Control Service; Stage 3</p>
<p>TS 29.561      5G System; Interworking between 5G Network and external Data Networks; Stage 3</p>
<p>TS 29.571      5G System; Common Data Types for Service Based Interfaces; Stage 3</p>
<p>TS 29.572      5G System; Location Management Services; Stage 3</p>
<p>TS 29.594      5G System; Spending Limit Control Service; Stage 3</p>
<p>The corresponding Security aspects of 5G System are defined by SA3 (UID: 750016). The work also serves as the basis for related charging and management, i.e., Data Charging in 5G System Architecture Phase 1 (UID: 780035), Service Based Interface for 5G Charging (UID: 780034), Management and orchestration of 5G networks and network slicing (UID: 760066).</p>
<h1 id="5G-接入網"><a href="#5G-接入網" class="headerlink" title="5G 接入網"></a>5G 接入網</h1><h2 id="簡介-1"><a href="#簡介-1" class="headerlink" title="簡介"></a>簡介</h2><p><img src="./NG-RAN_architecture.jpg" alt="NG-RAN_architecture.jpg"></p>
<p>NG-RAN 包括一組透過 NG Interface 連接到 5GC 的 gNB 組成，基於（或者說非常類似） LTE 網路的 S1 Interface</p>
<p>gNB (5G Node B)  能夠和其他 gNB 之間透過 Xn Interface 互相連接，基於（或者說非常類似）LTE 的 X2 Interface</p>
<p>Distributed Unit(s) (gNB-DU) 透過 Free5GC1 Interface 連接</p>
<p>一個 gNB-DU 僅鏈接一個 gNB-CU</p>
<p>gNB 處理如下任務</p>
<ul>
<li><p>無線資源管理功能：無線承載控制、無線接納控制、連接移動性控制、上下行資源動態分配給 UE（調度）</p>
</li>
<li><p>IP 報頭壓縮、加密和數據完整性保護</p>
</li>
<li><p>當無法根據 UE 提供的信息確定到 AMF 的路由時，在 UE 連接時選擇 AMF</p>
</li>
<li><p>將用戶平面數據路由至 UPF</p>
</li>
<li><p>將控制平面信息路由至 AMF</p>
</li>
<li><p>連接建立和釋放</p>
</li>
<li><p>尋呼消息的調度和傳輸</p>
</li>
<li><p>系統廣播信息的調度和傳輸（源自 AMF或 O&amp;M）</p>
</li>
<li><p>移動性和調度的測量和測量報告配置</p>
</li>
<li><p>上行鏈路中的傳輸級數據包標記</p>
</li>
<li><p>會話管理</p>
</li>
<li><p>支持網絡切片</p>
</li>
<li><p>QoS 流管理和映射到數據無線承載</p>
</li>
<li><p>支持處於 RRC_INACTIVE 狀態的 UE</p>
</li>
<li><p>NAS 消息分發功能</p>
</li>
<li><p>無線接入網絡共享</p>
</li>
<li><p>雙連接</p>
</li>
<li><p>NR 和 E-UTRA 之間的緊密互通</p>
</li>
</ul>
<h2 id="AN-控制面"><a href="#AN-控制面" class="headerlink" title="AN 控制面"></a>AN 控制面</h2><p>下圖展示了控制平面的協議棧</p>
<p><img src="./Access_Network_Control_Plane_Protocol_Stack.svg" alt="Access_Network_Control_Plane_Protocol_Stack"></p>
<p>其中：</p>
<ul>
<li>PHY 層（物理層）在第 5.5.5 節中描述。<ul>
<li>它的作用是對無線電接口上的信號進行調製和解調</li>
</ul>
</li>
<li>PDCP、RLC 和 MAC 子層（終止於網絡側的 gNB）<ul>
<li>執行“第 2 層相關方面”列表中列出的服務</li>
</ul>
</li>
<li>RRC（終止於網絡側的gNB）<ul>
<li>執行“RRC相關方面”列表中列出的服務</li>
</ul>
</li>
<li>NAS（非接入層）控制協議（在網絡側終止於 AMF ）<ul>
<li>指所有未鏈接到接入網絡並由接入網絡“透明”傳輸的方面和協議，即沒有解釋</li>
<li>TS 23.501 中列出的服務，例如身份驗證、移動性管理和安全控制</li>
</ul>
</li>
</ul>
<h2 id="AN-用戶面"><a href="#AN-用戶面" class="headerlink" title="AN 用戶面"></a>AN 用戶面</h2><p>下圖展示了用戶平面的協議棧</p>
<p><img src="./Access_Network_User_Plane_Protocol_Stack.svg" alt="Access_Network_User_Plane_Protocol_Stack"></p>
<p>SDAP, PDCP, RLC 和 MAC 子層，在網路側終結於 gNB</p>
<p>提供在 “ Layer 2 related aspects” 部分列出的服務</p>
<h2 id="AN-頂層"><a href="#AN-頂層" class="headerlink" title="AN 頂層"></a>AN 頂層</h2><h3 id="Layer-2-相關部分-MAC-RLC-PDCP-用戶面-PCP-控制面-和-SDAP"><a href="#Layer-2-相關部分-MAC-RLC-PDCP-用戶面-PCP-控制面-和-SDAP" class="headerlink" title="Layer 2 相關部分: MAC, RLC, PDCP 用戶面, PCP 控制面 和 SDAP"></a>Layer 2 相關部分: MAC, RLC, PDCP 用戶面, PCP 控制面 和 SDAP</h3><h4 id="MAC（媒體訪問控制）子層的主要服務和功能包括："><a href="#MAC（媒體訪問控制）子層的主要服務和功能包括：" class="headerlink" title="MAC（媒體訪問控制）子層的主要服務和功能包括："></a>MAC（媒體訪問控制）子層的主要服務和功能包括：</h4><ul>
<li>邏輯信道和傳輸信道之間的映射</li>
<li>屬於一個或不同邏輯信道的 MAC SDU 復用/解復用到/從傳輸塊 (TB) 傳輸到/從傳輸信道上的物理層</li>
<li>調度信息報告</li>
<li>通過混合自動重複請求 (HARQ) 進行糾錯，在載波聚合的情況下，每個小區一個 HARQ 實體</li>
<li>UE之間通過動態調度的優先級處理</li>
<li>通過邏輯信道優先級處理一個UE的邏輯信道之間的優先級</li>
<li>填充</li>
</ul>
<h4 id="RLC（Radio-Link-Control）子層的主要服務和功能取決於傳輸模式，包括："><a href="#RLC（Radio-Link-Control）子層的主要服務和功能取決於傳輸模式，包括：" class="headerlink" title="RLC（Radio Link Control）子層的主要服務和功能取決於傳輸模式，包括："></a>RLC（Radio Link Control）子層的主要服務和功能取決於傳輸模式，包括：</h4><ul>
<li>上層 PDUs 的傳輸</li>
<li>獨立於 PDCP 中的序列編號[僅用於未確認模式 (UM) 和確認模式 (AM)，不適用於透明模式 (TM)]</li>
<li>通過 ARQ 糾錯（僅限 AM）</li>
<li>RLC SDU 的分段（AM 和 UM）和重新分段（僅 AM）</li>
<li>重新組裝 SDU（AM 和 UM）</li>
<li>重複檢測（僅限 AM）</li>
<li>RLC SDU丟棄（AM和UM）</li>
<li>RLC 重建</li>
<li>協議錯誤檢測（僅限 AM）</li>
</ul>
<h4 id="PDCP（Packet-Data-Convergence-Protocol）子層為用戶面提供的主要服務和功能包括："><a href="#PDCP（Packet-Data-Convergence-Protocol）子層為用戶面提供的主要服務和功能包括：" class="headerlink" title="PDCP（Packet Data Convergence Protocol）子層為用戶面提供的主要服務和功能包括："></a>PDCP（Packet Data Convergence Protocol）子層為用戶面提供的主要服務和功能包括：</h4><ul>
<li>序列編號</li>
<li>頭部壓縮和解壓：僅限 ROHC</li>
<li>用戶數據的傳輸</li>
<li>重新排序和重複檢測</li>
<li>PDCP PDU 路由（在拆分承載的情況下）</li>
<li>PDCP SDU 的重傳</li>
<li>加密、解密</li>
<li>PDCP SDU丟棄</li>
<li>RLC AM的PDCP重建和數據恢復</li>
<li>PDCP PDU 的重複</li>
</ul>
<h4 id="PDCP-子層對控制平面的主要服務和功能包括："><a href="#PDCP-子層對控制平面的主要服務和功能包括：" class="headerlink" title="PDCP 子層對控制平面的主要服務和功能包括："></a>PDCP 子層對控制平面的主要服務和功能包括：</h4><ul>
<li>序列編號</li>
<li>加密、解密和完整性保護</li>
<li>控制平面數據的傳輸</li>
<li>重新排序和重複檢測</li>
<li>PDCP PDU 的重複</li>
</ul>
<h4 id="SDAP（Service-Data-Adaptation-Protocol）的主要服務和功能包括"><a href="#SDAP（Service-Data-Adaptation-Protocol）的主要服務和功能包括" class="headerlink" title="SDAP（Service Data Adaptation Protocol）的主要服務和功能包括"></a>SDAP（Service Data Adaptation Protocol）的主要服務和功能包括</h4><ul>
<li>QoS流和數據無線承載之間的映射</li>
<li>在 DL 和 UL 數據包中標記 QoS 流 ID (QFI)</li>
</ul>
<h3 id="RRC-相關部分"><a href="#RRC-相關部分" class="headerlink" title="RRC 相關部分"></a>RRC 相關部分</h3><p>RRC（Radio Resource Control）子層的主要服務和功能包括：</p>
<ul>
<li>廣播與 AS 和 NAS 相關的系統信息；</li>
<li>由 5GC 或 NG-RAN 發起的尋呼</li>
<li>UE 和 NG-RAN 之間 RRC 連接的建立、維護和釋放，包括：</li>
<li>載波聚合的添加、修改和發布；</li>
<li>添加、修改和發布 NR 中或 E-UTRA 和 NR 之間的雙連接。</li>
<li>安全功能，包括密鑰管理；</li>
<li>信令無線電承載（SRB）和數據無線電承載（DRB）的建立、配置、維護和釋放；</li>
<li>移動功能包括：</li>
<li>切換和上下文傳輸；</li>
<li>UE小區選擇和重選以及小區選擇和重選的控制；</li>
<li>RAT間移動性。</li>
<li>QoS管理功能；</li>
<li>UE測量報告和報告控制；</li>
<li>無線電鏈路故障的檢測和恢復；</li>
<li>NAS 消息傳輸到/從 NAS 從/到 UE。</li>
</ul>
<h2 id="AN-接口"><a href="#AN-接口" class="headerlink" title="AN 接口"></a>AN 接口</h2><p>包括</p>
<ul>
<li>Xn</li>
<li>NG</li>
<li>F1</li>
</ul>
<p>每個接口都包括自己的管理操作，包括：</p>
<ul>
<li><p>設置</p>
</li>
<li><p>重置</p>
</li>
<li><p>錯誤指示</p>
</li>
<li><p>刪除（僅適用於 Xn）</p>
</li>
</ul>
<h3 id="Xn-Interface-amp-X2-Interface"><a href="#Xn-Interface-amp-X2-Interface" class="headerlink" title="Xn Interface &amp; X2 Interface"></a>Xn Interface &amp; X2 Interface</h3><p>5G 的 Xn Interface 非常依賴於與之等效的 4G Interface 即 X2 Interface</p>
<p>X2 被更新到包括如下功能</p>
<ul>
<li>E-UTRA-NR 雙連接功能。 該功能允許 eNB 請求另一個 en-gNB 為某個 UE 提供無線電資源，同時保持對該 UE 的響應</li>
<li>二級 RAT 數據使用報告功能。 此功能允許 eNB 在每個 E-RAB 的基礎上獲取輔助 RAT 的上行鏈路和下行鏈路數據量。</li>
</ul>
<p>XnAP 協定提供如下功能：</p>
<ul>
<li>Xn 配置數據更新功能。該功能允許兩個 NG-RAN 節點隨時更新應用級數據。</li>
<li>交接準備功能。該功能允許在源和目標 NG-RAN 節點之間交換信息，以啟動某個 UE 到目標的切換。</li>
<li>切換取消功能。該功能允許通知已經準備好的目標 NG-RAN 節點準備好的切換不會發生。它允許釋放在準備期間分配的資源。</li>
<li>檢索 UE 上下文功能。檢索 UE 上下文功能用於 NG-RAN 節點從另一個節點檢索 UE 上下文。</li>
<li>RAN 尋呼功能。 RAN尋呼功能允許NG-RAN節點為處於非活動狀態的UE發起尋呼。</li>
<li>數據轉發控制功能。數據轉發控制功能允許在源和目標 NG-RAN 節點之間建立和釋放傳輸承載以進行數據轉發。</li>
<li>節能功能。此功能可通過 Xn 接口上的小區激活/停用指示來降低能耗。</li>
</ul>
<h3 id="NG-amp-S1-Interface"><a href="#NG-amp-S1-Interface" class="headerlink" title="NG &amp; S1 Interface"></a>NG &amp; S1 Interface</h3><p>5G 的 NG 接口與其等效的 4G 接口 S1 接口密切相關。 S1 更新為包括以下新增功能：次要 RAT 數據量報告功能。該功能使 eNB 能夠在 EN-DC 的情況下報告輔助 RAT 數據使用信息。<br>NGAP 協議提供以下功能：</p>
<ul>
<li>分頁功能。尋呼功能支持向尋呼區域中涉及的 NG-RAN 節點發送尋呼請求，例如UE註冊的TA的NG-RAN節點。</li>
<li>UE上下文管理功能。 UE上下文管理功能允許AMF在AMF和NG-RAN節點中建立、修改或釋放UE上下文。支持 NG 上的用戶個人信令。</li>
<li>移動管理功能。 ECM-CONNECTED 中 UE 的移動性功能包括系統內切換功能以支持 NG-RAN 內的移動性和系統間切換功能以支持從/到 EPS 系統的移動性。它包括通過NG接口準備、執行和完成切換。</li>
<li>PDU 會話管理功能。一旦 UE 上下文在 NG-RAN 節點中可用，PDU 會話功能負責為用戶數據傳輸建立、修改和釋放所涉及的 PDU 會話 NG-RAN 資源。</li>
<li>NAS傳輸功能。 NAS 信令傳輸功能提供了通過 NG 接口為特定 UE 傳輸或重新路由 NAS 消息（例如，用於 NAS 移動性管理）的方法。</li>
<li>NAS 節點選擇功能。 5GS 架構支持 NG-RAN 節點與多個 AMF 的互連。因此，NAS節點選擇功能位於NG-RAN節點中，以基於由AMF分配給UE的UE的臨時標識符來確定UE的AMF關聯。當 UE 的臨時標識符尚未分配或不再有效時，NG-RAN 節點可以改為考慮切片信息來確定 AMF。此功能位於 NG-RAN 節點中，可通過 NG 接口實現正確路由。在NG上，沒有具體的過程對應於NAS節點選擇功能。</li>
<li>警告信息傳輸功能。警告消息傳輸功能提供了通過NG接口傳輸警告消息或取消警告消息正在進行的廣播的手段。它還為 NG-RAN 提供了通知 AMF 一個或多個區域正在進行的 PWS 操作失敗的能力，或者 CBC 可能重新加載一個或多個區域。</li>
<li>配置傳輸功能。配置傳輸功能是一種通用機制，允許通過核心網絡在兩個 RAN 節點之間請求和傳輸 RAN 配置信息（例如 SON 信息）。</li>
<li>跟踪功能。跟踪功能提供了控制 NG-RAN 節點中跟踪會話的方法。</li>
<li>AMF 管理功能。 AMF 管理功能支持 AMF 計劃刪除和 AMF 自動恢復。</li>
<li>多個 TNL 關聯支持功能。當NG-RAN節點和AMF之間存在多個TNL關聯時，NG-RAN節點根據從AMF接收到的每個TNL關聯的使用情況和權重因子，為NGAP信令選擇TNL關聯，並使用TNL關聯.如果 AMF 釋放 TNL 關聯，NG-RAN 節點會選擇一個新的關聯</li>
<li>AMF 負載平衡功能。 NG 接口支持 AMF 向 NG-RAN 節點指示其相對容量，以便在池區域內實現負載均衡的 AMF。</li>
<li>位置報告功能。該功能使 AMF 能夠請求 NG-RAN 節點報告 UE 的當前位置，或帶有時間戳的 UE 最後已知位置，或 UE 在配置的感興趣區域中的存在。</li>
<li>AMF 重新分配功能。該功能允許將 NG-RAN 節點發出的初始連接請求從初始 AMF 重定向到 5GC 選擇的目標 AMF。在這種情況下，NG-RAN 節點在一個 NG 接口實例上發起初始 UE 消息過程，並接收第一個下行鏈路消息以通過不同的 NG 接口實例關閉與 UE 相關的邏輯連接。</li>
</ul>
<h3 id="F1-Interface"><a href="#F1-Interface" class="headerlink" title="F1 Interface"></a>F1 Interface</h3><p>將 en-gNB 進一步細分為 gNB-CU 和 gNB-DU 兩個邏輯節點</p>
<p>定義 F1 Interface 為連接這兩個邏輯節點的接口</p>
<p>在這種情況下</p>
<ul>
<li>gNB-CU 託管 RRC 和 PDCP 協議</li>
<li>而 gNB-DU 託管 RLC、MAC 和 PHY 功能</li>
</ul>
<p>F1AP協議提供以下功能：</p>
<ul>
<li>系統信息管理功能</li>
<li>F1 UE 上下文管理功能</li>
<li>RRC 消息傳輸功能</li>
<li>尋呼功能</li>
</ul>
<h1 id="無線物理層"><a href="#無線物理層" class="headerlink" title="無線物理層"></a>無線物理層</h1><p>和 LTE 類似，NR 下行波使用 OFDM wit Cyclic Prefix</p>
<p>與 LTE 相比，OFDM 還可用於 NR 上行鏈路 (UL) 方向</p>
<p>為應對各種部署場景，NR 支持廣泛的載頻（在兩個可能的範圍內）和信道帶寬，如下表所示</p>
<table>
<thead>
<tr>
<th>Frequency range</th>
<th>Frequency range</th>
<th>Supported  channel bandwidth [MHz]</th>
</tr>
</thead>
<tbody><tr>
<td>FR1</td>
<td>410 MHz – 7125 MHz</td>
<td>5, 10, 15, 20,  25, 30, 40, 50, 60, 80, 90, 100</td>
</tr>
<tr>
<td>FR2</td>
<td>24250 MHz – 52600 MHz</td>
<td>50, 100, 200,  400</td>
</tr>
</tbody></table>
<p>為了實現這種靈活性，NR 使用靈活的幀結構，具有不同的子載波間距 (SCS)</p>
<p>SCS 是兩個連續子載波中心之間的距離，SCS 的可能值是（以 kHz 為單位）：</p>
<ul>
<li>15</li>
<li>30</li>
<li>60</li>
<li>120</li>
<li>240</li>
</ul>
<p>一系列連續的 12 個子載波形成一個資源塊 (RB)。 NR 信道帶寬由多個 RB 組成。 資源元素（RE）被定義為一個子載波（頻域）和一個 OFDM 符號（時域）的單位</p>
<p>至於時域，分為10ms的無線幀，每幀包含10個1ms的子幀，如下圖所示</p>
<p><img src="./Frame_structure_in_NR.png" alt="Frame_structure_in_NR"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.changwei.me/free5gc/3GPP-Release-15-note/" data-id="ckumwoumt001hd7nm28dib9mu" data-title="3GPP Release-15 閱讀筆記" class="article-share-link">Teilen</a>
      
        <a href="https://blog.changwei.me/free5gc/3GPP-Release-15-note/#disqus_thread" class="article-comment-link">Kommentare</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/3GPP/" rel="tag">3GPP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/5G/" rel="tag">5G</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/R15/" rel="tag">R15</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Rel-15/" rel="tag">Rel-15</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Release-15/" rel="tag">Release-15</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Release15/" rel="tag">Release15</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-free5gc/3GPP-Introduction" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/free5gc/3GPP-Introduction/" class="article-date">
  <time class="dt-published" datetime="2021-09-21T02:33:42.000Z" itemprop="datePublished">2021-09-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/telecommunication-network/">telecommunication network</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/free5gc/3GPP-Introduction/">3GPP 與 3GPP 規格介紹</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="3GPP-與-3GPP-規格介紹"><a href="#3GPP-與-3GPP-規格介紹" class="headerlink" title="3GPP 與 3GPP 規格介紹"></a>3GPP 與 3GPP 規格介紹</h1><h2 id="3GPP-簡介"><a href="#3GPP-簡介" class="headerlink" title="3GPP 簡介"></a>3GPP 簡介</h2><p>參考 <a target="_blank" rel="noopener" href="https://www.3gpp.org/about-3gpp/about-3gpp">https://www.3gpp.org/about-3gpp/about-3gpp</a></p>
<p>3GPP 總共有三種技術標準化組織 <a target="_blank" rel="noopener" href="https://www.3gpp.org/specifications-groups">Technical Specification Groups</a> (TSG) ，包括：</p>
<ul>
<li>Radio Access Networks (<a target="_blank" rel="noopener" href="https://www.3gpp.org/RAN">RAN</a>)</li>
<li>Services &amp; Systems Aspects (<a target="_blank" rel="noopener" href="https://www.3gpp.org/SA">SA</a>)</li>
<li>Core Network &amp; Terminals (<a target="_blank" rel="noopener" href="https://www.3gpp.org/rubrique34">CT</a>) </li>
</ul>
<p><img src="./2021_new-Organigram_3gpp.jpg" alt="2021 3gpp Organigram"></p>
<p>3GPP 組織主要負責制定以上 3 個部分的電信網路標準</p>
<h2 id="3GPP-標準"><a href="#3GPP-標準" class="headerlink" title="3GPP 標準"></a>3GPP 標準</h2><h3 id="為何需要技術標準？"><a href="#為何需要技術標準？" class="headerlink" title="為何需要技術標準？"></a>為何需要技術標準？</h3><p>電信網路中設備數量和種類眾多，只有當制定了了標準之後，各個電信網路設備製造商才可以按照標準各自生產網路設備，然後可以依照標準中定義的接口互相連通，之後便可以共同協作運行。這裡的設備不僅僅包含電信網路局端設備（運營商），也包括用戶端設備（UE，User Equipment），例如手機，IoT 設備等</p>
<p>標準不同的情況下，各家製造商生產的設備無法互相連通。便無法實現網路互通。因此標準定義十分重要</p>
<h3 id="3GPP-Release-規格介紹"><a href="#3GPP-Release-規格介紹" class="headerlink" title="3GPP Release 規格介紹"></a>3GPP Release 規格介紹</h3><p>參考 <a target="_blank" rel="noopener" href="https://www.3gpp.org/releases">https://www.3gpp.org/releases</a></p>
<p>3GPP 使用名為 “Releases” 的命名方式，定期將一部分技術特性整理在某個指定版本中，並且允許在之後的版本中繼續增加新功能</p>
<p>例如  <a target="_blank" rel="noopener" href="https://portal.3gpp.org/desktopmodules/Specifications/SpecificationDetails.aspx?specificationId=3179">TR 21.914</a> covers Rel-14, <a target="_blank" rel="noopener" href="https://portal.3gpp.org/desktopmodules/Specifications/SpecificationDetails.aspx?specificationId=3389">TR 21.915</a> for Rel-15 and now <a target="_blank" rel="noopener" href="https://portal.3gpp.org/desktopmodules/Specifications/SpecificationDetails.aspx?specificationId=3493">TR 21.916</a> as the Rel-16 description document. 可以看出規律，TR.219xx，其中 xx 對應 Release-xx 中的 xx 部分</p>
<p>如下圖所示，這是最近的 Release 發佈時間表（寫稿時間為：2021-09-21）</p>
<p><img src="./Release_timeline_R16_R17.jpg" alt="Release timeline R16 R17"></p>
<p>在 <a target="_blank" rel="noopener" href="https://portal.3gpp.org/#/55934-releases">https://portal.3gpp.org/#/55934-releases</a> 可以查看所有 Release 標準的進度</p>
<h3 id="規格的-stage"><a href="#規格的-stage" class="headerlink" title="規格的 stage"></a>規格的 stage</h3><p>The term “Stage” derives from the ITU-T (originally CCITT) method for categorizing specifications (<a href="https://"http/www.itu.int/rec/T-REC-I.130/en/%22">Recommendation I.130</a>).</p>
<p>stage 是來自 ITU-T（最初是 CCITT）組織在 I.130 標準建議書中提出的一種標準分類方法</p>
<ul>
<li>“Stage 1” refers to the service description from a service-user’s point of view.<ul>
<li>stage 1 指的是從服務用戶的視角描述服務</li>
</ul>
</li>
<li>“Stage 2” is a logical analysis, devising an abstract architecture of functional elements and the information flows amongst them across reference points between functional entities.<ul>
<li>stage 2 是邏輯分析與功能設計元素的抽象架構，以及功能實體之間的信息流參考點（此處描述比較抽象，需要藉助一個具體的標準文件進行解釋）</li>
</ul>
</li>
<li>“Stage 3” is the concrete implementation of the functionality and of the protocols appearing at physical interfaces between physical elements onto which the functional elements have been mapped.<ul>
<li>stage 3 是功能和協定的具體實現，這些實現體在對應功能元件（一些物理元件）之間的物理通訊接口上</li>
</ul>
</li>
</ul>
<p>The mechanisms for creating and maintaining specifications are described in <a target="_blank" rel="noopener" href="https://www.3gpp.org/DynaReport/21900.htm">TR 21.900</a>. A presentation outlining the release and change request process can be found <a target="_blank" rel="noopener" href="https://www.3gpp.org/FTP/Inbox/2008_web_files/The_change_control_cycle.ppt">here.</a></p>
<p>在 TR 21.900 中描述了這些規範的創建和維護機制</p>
<h3 id="規格的命名"><a href="#規格的命名" class="headerlink" title="規格的命名"></a>規格的命名</h3><p><a target="_blank" rel="noopener" href="https://www.3gpp.org/specifications/specification-numbering">https://www.3gpp.org/specifications/specification-numbering</a></p>
<p>所有 3GPP 規格都有一個由 4 到 5 位數字的規格名稱（例如 09.02 或者 29.002）</p>
<p>前 2 位數字定義規格所屬的系列，後面緊跟著 01 至 13 系列對應的 2 個數字，或者 21 至 55 系列的 3 位數字</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.changwei.me/free5gc/3GPP-Introduction/" data-id="ckumwoum90004d7nm967j755z" data-title="3GPP 與 3GPP 規格介紹" class="article-share-link">Teilen</a>
      
        <a href="https://blog.changwei.me/free5gc/3GPP-Introduction/#disqus_thread" class="article-comment-link">Kommentare</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/3GPP/" rel="tag">3GPP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Specification/" rel="tag">Specification</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-free5gc/AMF-v3.0.5" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/free5gc/AMF-v3.0.5/" class="article-date">
  <time class="dt-published" datetime="2021-08-29T11:00:01.000Z" itemprop="datePublished">2021-08-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/telecommunication-network/">telecommunication network</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/free5gc/AMF-v3.0.5/">Tracing Source Code of AMF of Free5GC</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="AMF-v3-0-5"><a href="#AMF-v3-0-5" class="headerlink" title="AMF v3.0.5"></a>AMF v3.0.5</h1><h2 id="Call-Flow"><a href="#Call-Flow" class="headerlink" title="Call Flow"></a>Call Flow</h2><ul>
<li>main.go<ul>
<li>基於urfave/cli作為CLI程式的參數處理工具</li>
<li>基於sirupsen/logrus為日誌系統</li>
<li>設定app名稱，參數使用方法usage的顯示，參數flag的獲取，參數動作的routing</li>
<li>判斷app運行後是否出錯，若有錯誤直接退出並且打日誌</li>
<li>將action掛載到app cli程式上，action是程式的主體邏輯與動作<ul>
<li>執行AMF.Initialize，若有錯誤則打日誌<ul>
<li>執行factory.InitConfigFactory(amfcfg)讀取amfcfg文件中的配置信息（根據是否傳入amfcfg這個flag決定從何處讀取配置文件）</li>
<li>根據配置文件中的log level，對logrus進行正確的log level設定</li>
<li>檢測配置版本是否為AMF_EXPECTED_CONFIG_VERSION（在v3.0.5中該值為1.0.2），若不匹配則throw err</li>
</ul>
</li>
<li>執行AMF.Start開始運行<ul>
<li>使用logger_util.NewGinWithLogrus創建了一個基於Gin和Logrus的REST HTTP API Server Middleware（背景知識：Gin為golang語言中的高性能HTTP REST API Server框架，Logrus為golang語言中的日誌框架，Middleware將會攔截每個請求，並在請求處理的之前（pre）和之後（post）執行相關動作）<ul>
<li>這裡實際將如下訊息打印到日誌中<ul>
<li>path</li>
<li>query body</li>
<li>client ip</li>
<li>request method</li>
<li>response status</li>
<li>error message</li>
</ul>
</li>
</ul>
</li>
<li>使用router.Use(cors.New(cors.Config{}))創建middleware，用於支援CORS請求（Cross-origin resource sharing），CORS是在傳統瀏覽器環境下需要為“同源策略”放行的規則，為了相容類似於Web Console等需要使用Web Browser訪問某些free5gc中的HTTP API的場景，因此需要設定該CORS規則。</li>
<li>將httpcallback的router註冊到URL為<code>/namf-callback/v1</code>的分組上（部分細節待確認）</li>
<li>將oam的router註冊到URL為<code>/namf-oam/v1</code>的分組上（部分細節待確認）<ul>
<li>TODO and future work<ul>
<li>此處有coding style問題，例如文件名未統一為route或者routes</li>
<li>此處有專案目錄結構問題，例如未把service層和controller層規劃在一個專門的package下，導致專案package結構不夠清晰明確（通常在Java Web等專案中都會有統一的controller，service，modle等分層架構）</li>
</ul>
</li>
</ul>
</li>
<li>從AMF配置文件的AmfConfig.Configuration.ServiceNameList部分讀取服務名稱列表，並且將對應的router註冊到對應的URL<ul>
<li>其Configuration Temple File中(/config/amfcfg.yaml)包含如下配置<pre class="line-numbers language-none"><code class="language-none">serviceNameList: # the SBI services provided by this AMF, refer to TS 29.518
    - namf-comm # Namf_Communication service
    - namf-evts # Namf_EventExposure service
    - namf-mt   # Namf_MT service
    - namf-loc  # Namf_Location service
    - namf-oam  # OAM service<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
</li>
<li>其程式碼中只包含如下服務的註冊流程<ul>
<li>ServiceName_NAMF_COMM</li>
<li>ServiceName_NAMF_EVTS</li>
<li>ServiceName_NAMF_MT</li>
<li>ServiceName_NAMF_LOC</li>
</ul>
</li>
<li><code>self := context.AMF_Self()</code> 將 /amf/context/context.go@struct context賦值給self並且調用 /amf/util/init_context@InitAmfContext<ul>
<li>該流程中主要是讀取配置文件並且將配置信息注入struct context中，對不合法的配置項設定缺省值（default value）</li>
<li>context 包含 NFs/amf/context/context.go@struct AMFContext和一些methods</li>
</ul>
</li>
<li><code>addr := fmt.Sprintf(&quot;%s:%d&quot;, self.BindingIPv4, self.SBIPort)</code> 組裝IPv4和port為inet addr格式的字符串</li>
<li>在NgapIpList配置和38412端口運行ngap服務<ul>
<li>該服務包含的handler<ul>
<li>ngap.Dispatch</li>
<li>ngap.HandleSCTPNotification</li>
</ul>
</li>
</ul>
</li>
<li>將本服務即AMF註冊至NRF (Register to NRF)<ul>
<li>調用 /consumer/BuildNFInstance() 構建 AMF 需要在 NRF 中註冊的資料結構(一個 type為 NfProfile 的 model 對象)</li>
<li>註冊 NF 後獲取 nfId 並且寫入當前 context 中</li>
</ul>
</li>
<li>偵聽 os signal，當signal 為 interrupt 時執行 amf.Terminate() 並且退出進程，返回 0 號錯誤碼給 OS<ul>
<li><p>amf.Terminate()</p>
<ul>
<li><pre><code>  TODO: forward registered UE contexts to target AMF in the same AMF set if there is one
</code></pre>
<p>  根據此項 TODO 看，未來工作中將要引入自動 AMF 遷移機制，當一個 AMF 停機後，需要遷移連接至該 AMF 的所有 UE 到其他 AMF 上，實現自動故障轉移和負載均衡</p>
</li>
<li><p>執行 SendDeregisterNFInstance 流程，從 NF 中移除當前實例</p>
</li>
<li><p>執行 BuildUnavailableGUAMIList 流程(暫不清楚該流程的作用和內容)</p>
</li>
<li><p>執行 ngap_message.SendAMFStatusIndication(ran, unavailableGuamiList) 動作</p>
</li>
<li><p>停止 ngap_service 服務</p>
</li>
<li><p> 向其他subscription 宣告自己將要停止服務</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>factory<ul>
<li>config.go<ul>
<li>配置struct的聲明和default value的getter（當某些配置不存在時會自動返回默認值）</li>
</ul>
</li>
<li>factory.go<ul>
<li>InitConfigFactory讀取文件，並使用yaml.Unmarshal將配置信息解析到AmfConfig變數中</li>
<li>TODO：需要支援從API中更新配置（我個人猜測可能是未來工作中需要做一個配置中心，因為微服務環境下通常都有配置中心集中管理配置一些需要統一設定的配置，而非每個微服務自己攜帶一些重複性的配置文件，至於非重複性的配置，根據我的工作經驗，通常使用.env環境變量的方式進行管理）</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.changwei.me/free5gc/AMF-v3.0.5/" data-id="ckumwouma0005d7nma5itfztw" data-title="Tracing Source Code of AMF of Free5GC" class="article-share-link">Teilen</a>
      
        <a href="https://blog.changwei.me/free5gc/AMF-v3.0.5/#disqus_thread" class="article-comment-link">Kommentare</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/5G/" rel="tag">5G</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/5GC/" rel="tag">5GC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/5G%E6%A0%B8%E5%BF%83%E7%B6%B2/" rel="tag">5G核心網</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/5G%E6%A0%B8%E5%BF%83%E7%BD%91/" rel="tag">5G核心网</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AMF/" rel="tag">AMF</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Code-Tracing/" rel="tag">Code Tracing</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Free5GC/" rel="tag">Free5GC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%91%E6%A0%B8%E5%BF%83%E7%BD%91/" rel="tag">云核心网</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-free5gc/Free5GC-Code-Tracing" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/free5gc/Free5GC-Code-Tracing/" class="article-date">
  <time class="dt-published" datetime="2021-08-29T11:00:00.000Z" itemprop="datePublished">2021-08-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/telecommunication-network/">telecommunication network</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/free5gc/Free5GC-Code-Tracing/">Free5GC Code Tracing</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Free5GC-Code-Tracing"><a href="#Free5GC-Code-Tracing" class="headerlink" title="Free5GC Code Tracing"></a>Free5GC Code Tracing</h1><p>the code tracing below is based the project in GitHub which repo URI is <a target="_blank" rel="noopener" href="https://github.com/free5gc/free5gc">free5gc/free5gc</a> and <strong>version is <a target="_blank" rel="noopener" href="https://github.com/free5gc/free5gc/releases/tag/v3.0.5">v3.0.5</a></strong><br>you can fetch <strong>all source code</strong> which version is <code>v3.0.5</code> by these command<br><code>git clone --recursive -b v3.0.5 -j `nproc` https://github.com/free5gc/free5gc.git</code></p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><h3 id="What-is-free5GC"><a href="#What-is-free5GC" class="headerlink" title="What is free5GC?"></a>What is free5GC?</h3><p>The free5GC is an open-source project for 5th generation (5G) mobile core networks. The ultimate goal of this project is to implement the 5G core network (5GC) defined in 3GPP Release 15 (R15) and beyond.</p>
<p>Currently, the major contributors are with National Chiao Tung University (NCTU). Please refer to our roadmap for the features of each release.</p>
<p>refer to <a target="_blank" rel="noopener" href="https://github.com/free5gc/free5gc#readme">https://github.com/free5gc/free5gc#readme</a></p>
<h2 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h2><ul>
<li>Golang 1.15.x</li>
<li>Ubuntu Server 20.04 LTS</li>
</ul>
<h2 id="Future-Work"><a href="#Future-Work" class="headerlink" title="Future Work"></a>Future Work</h2><ul>
<li>unified the <strong>identity(variable) naming rule</strong><ul>
<li>for searching optimize by IDE(code editor) and coding reformat</li>
</ul>
</li>
<li>optimize the coding style by theory based <strong>software design pattern</strong> including these methods:<ul>
<li>extract some codes from a big function to some small functions. <ul>
<li>Why we need do this? <ul>
<li>Because many IDEs and code editors like Goland, VSCode, Eclipse have a panel names “Structure”, the UI screenshot is at below:<ul>
<li><img src="./goland_structure_panel_screenshot.png" alt="goland_structure_panel_screenshot"></li>
</ul>
</li>
<li>We can easily watch all functions in the panel, so we can quickly understand what functions are included in the code and its role or duty in the Network Function(NF) by the function name, but not only a Start() function(We can’t quickly understand what actions are done in the Start() function unless tracing every code line in this function)</li>
<li>We can easily test many small functions by automatic unit test framework like <a target="_blank" rel="noopener" href="https://books.studygolang.com/The-Golang-Standard-Library-by-Example/chapter09/09.1.html">gotest</a>, so we could develop new features and refoactor old codes efficienly.</li>
</ul>
</li>
</ul>
</li>
<li>move the hard-code and magic number to the configuration or constant with description comment</li>
</ul>
</li>
<li>refactor the <strong>directory structure</strong><ul>
<li>We can quickly understand the role of files, and locate the bugs quickly </li>
</ul>
</li>
<li>optimize the <strong>performance</strong><ul>
<li>TODO</li>
</ul>
</li>
<li>add <strong>some comment</strong> for coding analysis friendly<ul>
<li> we can generate the application documentation by <a target="_blank" rel="noopener" href="https://golang.org/doc/"><code>go doc</code></a> and API documentation by <code>swagger</code>, and we can easily test the HTTP RESTful API in the <a target="_blank" rel="noopener" href="https://swagger.io/tools/swagger-ui/">swagger-ui</a></li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.changwei.me/free5gc/Free5GC-Code-Tracing/" data-id="ckumwoumm000vd7nm3x2g5ijm" data-title="Free5GC Code Tracing" class="article-share-link">Teilen</a>
      
        <a href="https://blog.changwei.me/free5gc/Free5GC-Code-Tracing/#disqus_thread" class="article-comment-link">Kommentare</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/5G/" rel="tag">5G</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/5GC/" rel="tag">5GC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/5G%E6%A0%B8%E5%BF%83%E7%B6%B2/" rel="tag">5G核心網</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/5G%E6%A0%B8%E5%BF%83%E7%BD%91/" rel="tag">5G核心网</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Code-Tracing/" rel="tag">Code Tracing</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Free5GC/" rel="tag">Free5GC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%91%E6%A0%B8%E5%BF%83%E7%BD%91/" rel="tag">云核心网</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-about" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/about/" class="article-date">
  <time class="dt-published" datetime="2021-08-08T08:07:05.000Z" itemprop="datePublished">2021-08-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/telecommunication-network/">telecommunication network</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/about/">关于我</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.changwei.me/about/" data-id="ckumwoum00000d7nmc3cybnvd" data-title="关于我" class="article-share-link">Teilen</a>
      
        <a href="https://blog.changwei.me/about/#disqus_thread" class="article-comment-link">Kommentare</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/about/" rel="tag">about</a></li></ul>

    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Kategorien</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/telecommunication-network/">telecommunication network</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/3GPP/" rel="tag">3GPP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/5G/" rel="tag">5G</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/5GC/" rel="tag">5GC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/5G%E6%A0%B8%E5%BF%83%E7%B6%B2/" rel="tag">5G核心網</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/5G%E6%A0%B8%E5%BF%83%E7%BD%91/" rel="tag">5G核心网</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AMF/" rel="tag">AMF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Code-Tracing/" rel="tag">Code Tracing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Core-Network/" rel="tag">Core Network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Free5GC/" rel="tag">Free5GC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Network-Function/" rel="tag">Network Function</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/R15/" rel="tag">R15</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Rel-15/" rel="tag">Rel-15</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Release-15/" rel="tag">Release-15</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Release15/" rel="tag">Release15</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Specification/" rel="tag">Specification</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/about/" rel="tag">about</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%91%E6%A0%B8%E5%BF%83%E7%BD%91/" rel="tag">云核心网</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/3GPP/" style="font-size: 13.33px;">3GPP</a> <a href="/tags/5G/" style="font-size: 20px;">5G</a> <a href="/tags/5GC/" style="font-size: 16.67px;">5GC</a> <a href="/tags/5G%E6%A0%B8%E5%BF%83%E7%B6%B2/" style="font-size: 16.67px;">5G核心網</a> <a href="/tags/5G%E6%A0%B8%E5%BF%83%E7%BD%91/" style="font-size: 16.67px;">5G核心网</a> <a href="/tags/AMF/" style="font-size: 10px;">AMF</a> <a href="/tags/Code-Tracing/" style="font-size: 16.67px;">Code Tracing</a> <a href="/tags/Core-Network/" style="font-size: 10px;">Core Network</a> <a href="/tags/Free5GC/" style="font-size: 16.67px;">Free5GC</a> <a href="/tags/Network-Function/" style="font-size: 10px;">Network Function</a> <a href="/tags/R15/" style="font-size: 10px;">R15</a> <a href="/tags/Rel-15/" style="font-size: 10px;">Rel-15</a> <a href="/tags/Release-15/" style="font-size: 10px;">Release-15</a> <a href="/tags/Release15/" style="font-size: 10px;">Release15</a> <a href="/tags/Specification/" style="font-size: 10px;">Specification</a> <a href="/tags/about/" style="font-size: 10px;">about</a> <a href="/tags/%E4%BA%91%E6%A0%B8%E5%BF%83%E7%BD%91/" style="font-size: 16.67px;">云核心网</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/free5gc/Network-Functions-In-5G-Core-Network/">Network Functions in 5G Core Network</a>
          </li>
        
          <li>
            <a href="/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/free5gc/3GPP-Release-15-note/">3GPP Release-15 閱讀筆記</a>
          </li>
        
          <li>
            <a href="/free5gc/3GPP-Introduction/">3GPP 與 3GPP 規格介紹</a>
          </li>
        
          <li>
            <a href="/free5gc/AMF-v3.0.5/">Tracing Source Code of AMF of Free5GC</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 cw1997<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'changwei';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.async = true;
    dsq.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>



<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>